From: Philip Hands <phil@hands.com>
Date: Mon, 16 Dec 2024 17:10:36 +0100
Subject: use node_modules/_u_s_... -> /usr/share/... links

Forwarded: not-needed

This allows us to access locally installed assets while still matching
the '../node_modules/' pattern that's used in the source.

It _might_ be better to switch to allowing direct access to the
/usr/share/... paths in Assetpack.
---
 assets/assetpack.def           | 222 ++++++++++++++++++++---------------------
 assets/stylesheets/openqa.scss |   2 +-
 2 files changed, 112 insertions(+), 112 deletions(-)

diff --git a/assets/assetpack.def b/assets/assetpack.def
index ab7188c..8bacc96 100644
--- a/assets/assetpack.def
+++ b/assets/assetpack.def
@@ -1,132 +1,132 @@
 ! bootstrap.css
-< ../node_modules/datatables.net-bs5/css/dataTables.bootstrap5.min.css
-< ../node_modules/chosen-js/chosen.css
-<< ../node_modules/bootstrap/scss/bootstrap.scss
-<< ../node_modules/bootstrap/scss/bootstrap-utilities.scss
-<< ../node_modules/bootstrap/scss/bootstrap-grid.scss
-<< ../node_modules/bootstrap/scss/_accordion.scss
-<< ../node_modules/bootstrap/scss/_alert.scss
-<< ../node_modules/bootstrap/scss/_badge.scss
-<< ../node_modules/bootstrap/scss/_breadcrumb.scss
-<< ../node_modules/bootstrap/scss/_button-group.scss
-<< ../node_modules/bootstrap/scss/_buttons.scss
-<< ../node_modules/bootstrap/scss/_card.scss
-<< ../node_modules/bootstrap/scss/_carousel.scss
-<< ../node_modules/bootstrap/scss/_close.scss
-<< ../node_modules/bootstrap/scss/_containers.scss
-<< ../node_modules/bootstrap/scss/_dropdown.scss
-<< ../node_modules/bootstrap/scss/_forms.scss
-<< ../node_modules/bootstrap/scss/forms/_floating-labels.scss
-<< ../node_modules/bootstrap/scss/forms/_form-check.scss
-<< ../node_modules/bootstrap/scss/forms/_form-control.scss
-<< ../node_modules/bootstrap/scss/forms/_form-range.scss
-<< ../node_modules/bootstrap/scss/forms/_form-select.scss
-<< ../node_modules/bootstrap/scss/forms/_form-text.scss
-<< ../node_modules/bootstrap/scss/forms/_input-group.scss
-<< ../node_modules/bootstrap/scss/forms/_labels.scss
-<< ../node_modules/bootstrap/scss/forms/_validation.scss
-<< ../node_modules/bootstrap/scss/_functions.scss
-<< ../node_modules/bootstrap/scss/_grid.scss
-<< ../node_modules/bootstrap/scss/_helpers.scss
-<< ../node_modules/bootstrap/scss/helpers/_clearfix.scss
-<< ../node_modules/bootstrap/scss/helpers/_color-bg.scss
-<< ../node_modules/bootstrap/scss/helpers/_colored-links.scss
-<< ../node_modules/bootstrap/scss/helpers/_focus-ring.scss
-<< ../node_modules/bootstrap/scss/helpers/_icon-link.scss
-<< ../node_modules/bootstrap/scss/helpers/_position.scss
-<< ../node_modules/bootstrap/scss/helpers/_ratio.scss
-<< ../node_modules/bootstrap/scss/helpers/_stacks.scss
-<< ../node_modules/bootstrap/scss/helpers/_stretched-link.scss
-<< ../node_modules/bootstrap/scss/helpers/_text-truncation.scss
-<< ../node_modules/bootstrap/scss/helpers/_visually-hidden.scss
-<< ../node_modules/bootstrap/scss/helpers/_vr.scss
-<< ../node_modules/bootstrap/scss/_images.scss
-<< ../node_modules/bootstrap/scss/_list-group.scss
-<< ../node_modules/bootstrap/scss/_maps.scss
-<< ../node_modules/bootstrap/scss/_mixins.scss
-<< ../node_modules/bootstrap/scss/mixins/_alert.scss
-<< ../node_modules/bootstrap/scss/mixins/_backdrop.scss
-<< ../node_modules/bootstrap/scss/mixins/_banner.scss
-<< ../node_modules/bootstrap/scss/mixins/_border-radius.scss
-<< ../node_modules/bootstrap/scss/mixins/_box-shadow.scss
-<< ../node_modules/bootstrap/scss/mixins/_breakpoints.scss
-<< ../node_modules/bootstrap/scss/mixins/_buttons.scss
-<< ../node_modules/bootstrap/scss/mixins/_caret.scss
-<< ../node_modules/bootstrap/scss/mixins/_clearfix.scss
-<< ../node_modules/bootstrap/scss/mixins/_color-mode.scss
-<< ../node_modules/bootstrap/scss/mixins/_color-scheme.scss
-<< ../node_modules/bootstrap/scss/mixins/_container.scss
-<< ../node_modules/bootstrap/scss/mixins/_deprecate.scss
-<< ../node_modules/bootstrap/scss/mixins/_forms.scss
-<< ../node_modules/bootstrap/scss/mixins/_gradients.scss
-<< ../node_modules/bootstrap/scss/mixins/_grid.scss
-<< ../node_modules/bootstrap/scss/mixins/_image.scss
-<< ../node_modules/bootstrap/scss/mixins/_list-group.scss
-<< ../node_modules/bootstrap/scss/mixins/_lists.scss
-<< ../node_modules/bootstrap/scss/mixins/_pagination.scss
-<< ../node_modules/bootstrap/scss/mixins/_reset-text.scss
-<< ../node_modules/bootstrap/scss/mixins/_resize.scss
-<< ../node_modules/bootstrap/scss/mixins/_table-variants.scss
-<< ../node_modules/bootstrap/scss/mixins/_text-truncate.scss
-<< ../node_modules/bootstrap/scss/mixins/_transition.scss
-<< ../node_modules/bootstrap/scss/mixins/_utilities.scss
-<< ../node_modules/bootstrap/scss/mixins/_visually-hidden.scss
-<< ../node_modules/bootstrap/scss/_modal.scss
-<< ../node_modules/bootstrap/scss/_navbar.scss
-<< ../node_modules/bootstrap/scss/_nav.scss
-<< ../node_modules/bootstrap/scss/_offcanvas.scss
-<< ../node_modules/bootstrap/scss/_pagination.scss
-<< ../node_modules/bootstrap/scss/_placeholders.scss
-<< ../node_modules/bootstrap/scss/_popover.scss
-<< ../node_modules/bootstrap/scss/_progress.scss
-<< ../node_modules/bootstrap/scss/_reboot.scss
-<< ../node_modules/bootstrap/scss/_root.scss
-<< ../node_modules/bootstrap/scss/_spinners.scss
-<< ../node_modules/bootstrap/scss/_tables.scss
-<< ../node_modules/bootstrap/scss/_toasts.scss
-<< ../node_modules/bootstrap/scss/_tooltip.scss
-<< ../node_modules/bootstrap/scss/_transitions.scss
-<< ../node_modules/bootstrap/scss/_type.scss
-<< ../node_modules/bootstrap/scss/_utilities.scss
-<< ../node_modules/bootstrap/scss/utilities/_api.scss
-<< ../node_modules/bootstrap/scss/_variables-dark.scss
-<< ../node_modules/bootstrap/scss/_variables.scss
-<< ../node_modules/bootstrap/scss/vendor/_rfs.scss
+< ../node_modules/_u_s_javascript/jquery-datatables/css/dataTables.bootstrap5.min.css
+< ../node_modules/_u_s_javascript/chosen/chosen.css
+<< ../node_modules/_u_s_sass/bootstrap/bootstrap.scss
+<< ../node_modules/_u_s_sass/bootstrap/bootstrap-utilities.scss
+<< ../node_modules/_u_s_sass/bootstrap/bootstrap-grid.scss
+<< ../node_modules/_u_s_sass/bootstrap/_accordion.scss
+<< ../node_modules/_u_s_sass/bootstrap/_alert.scss
+<< ../node_modules/_u_s_sass/bootstrap/_badge.scss
+<< ../node_modules/_u_s_sass/bootstrap/_breadcrumb.scss
+<< ../node_modules/_u_s_sass/bootstrap/_button-group.scss
+<< ../node_modules/_u_s_sass/bootstrap/_buttons.scss
+<< ../node_modules/_u_s_sass/bootstrap/_card.scss
+<< ../node_modules/_u_s_sass/bootstrap/_carousel.scss
+<< ../node_modules/_u_s_sass/bootstrap/_close.scss
+<< ../node_modules/_u_s_sass/bootstrap/_containers.scss
+<< ../node_modules/_u_s_sass/bootstrap/_dropdown.scss
+<< ../node_modules/_u_s_sass/bootstrap/_forms.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_floating-labels.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_form-check.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_form-control.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_form-range.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_form-select.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_form-text.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_input-group.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_labels.scss
+<< ../node_modules/_u_s_sass/bootstrap/forms/_validation.scss
+<< ../node_modules/_u_s_sass/bootstrap/_functions.scss
+<< ../node_modules/_u_s_sass/bootstrap/_grid.scss
+<< ../node_modules/_u_s_sass/bootstrap/_helpers.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_clearfix.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_color-bg.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_colored-links.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_focus-ring.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_icon-link.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_position.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_ratio.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_stacks.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_stretched-link.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_text-truncation.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_visually-hidden.scss
+<< ../node_modules/_u_s_sass/bootstrap/helpers/_vr.scss
+<< ../node_modules/_u_s_sass/bootstrap/_images.scss
+<< ../node_modules/_u_s_sass/bootstrap/_list-group.scss
+<< ../node_modules/_u_s_sass/bootstrap/_maps.scss
+<< ../node_modules/_u_s_sass/bootstrap/_mixins.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_alert.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_backdrop.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_banner.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_border-radius.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_box-shadow.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_breakpoints.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_buttons.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_caret.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_clearfix.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_color-mode.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_color-scheme.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_container.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_deprecate.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_forms.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_gradients.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_grid.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_image.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_list-group.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_lists.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_pagination.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_reset-text.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_resize.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_table-variants.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_text-truncate.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_transition.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_utilities.scss
+<< ../node_modules/_u_s_sass/bootstrap/mixins/_visually-hidden.scss
+<< ../node_modules/_u_s_sass/bootstrap/_modal.scss
+<< ../node_modules/_u_s_sass/bootstrap/_navbar.scss
+<< ../node_modules/_u_s_sass/bootstrap/_nav.scss
+<< ../node_modules/_u_s_sass/bootstrap/_offcanvas.scss
+<< ../node_modules/_u_s_sass/bootstrap/_pagination.scss
+<< ../node_modules/_u_s_sass/bootstrap/_placeholders.scss
+<< ../node_modules/_u_s_sass/bootstrap/_popover.scss
+<< ../node_modules/_u_s_sass/bootstrap/_progress.scss
+<< ../node_modules/_u_s_sass/bootstrap/_reboot.scss
+<< ../node_modules/_u_s_sass/bootstrap/_root.scss
+<< ../node_modules/_u_s_sass/bootstrap/_spinners.scss
+<< ../node_modules/_u_s_sass/bootstrap/_tables.scss
+<< ../node_modules/_u_s_sass/bootstrap/_toasts.scss
+<< ../node_modules/_u_s_sass/bootstrap/_tooltip.scss
+<< ../node_modules/_u_s_sass/bootstrap/_transitions.scss
+<< ../node_modules/_u_s_sass/bootstrap/_type.scss
+<< ../node_modules/_u_s_sass/bootstrap/_utilities.scss
+<< ../node_modules/_u_s_sass/bootstrap/utilities/_api.scss
+<< ../node_modules/_u_s_sass/bootstrap/_variables-dark.scss
+<< ../node_modules/_u_s_sass/bootstrap/_variables.scss
+<< ../node_modules/_u_s_sass/bootstrap/vendor/_rfs.scss
 < stylesheets/openqa.scss
-< ../node_modules/fork-awesome/css/fork-awesome.min.css
+< ../node_modules/_u_s_ffa/css/fork-awesome.css
 < 3rdparty/bootstrap-4-multi-dropdown-navbar/beta2.0/css/bootstrap-4-navbar.css
 < stylesheets/back_to_top.css
 < stylesheets/disable_animations.css [mode==test]
 
 ! dagre-d3.js
-< ../node_modules/d3/dist/d3.min.js
-< ../node_modules/dagre-d3/dist/dagre-d3.js
+< ../node_modules/_u_s_nodejs/d3/dist/d3.min.js
+< ../node_modules/_u_s_nodejs/dagre-d3/dist/dagre-d3.js
 
 ! dependency_graph.css
 < stylesheets/dependency_graph.scss
 
 ! ace.css
-< ../node_modules/ace-builds/css/ace.css
+< ../node_modules/_u_s_nodejs/ace-builds/css/ace.css
 < stylesheets/ace.css
 
 ! ace.js
-< ../node_modules/ace-builds/src-min/ace.js
-< ../node_modules/ace-builds/src-min/mode-perl.js
-< ../node_modules/ace-builds/src-min/mode-yaml.js
-< ../node_modules/ace-builds/src-min/mode-diff.js
-< ../node_modules/ace-builds/src-min/mode-ini.js
+< ../node_modules/_u_s_nodejs/ace-builds/src-min/ace.js
+< ../node_modules/_u_s_nodejs/ace-builds/src-min/mode-perl.js
+< ../node_modules/_u_s_nodejs/ace-builds/src-min/mode-yaml.js
+< ../node_modules/_u_s_nodejs/ace-builds/src-min/mode-diff.js
+< ../node_modules/_u_s_nodejs/ace-builds/src-min/mode-ini.js
 
 ! step_edit.js
 < javascripts/needleeditor.js
 < javascripts/shapes.js
 
 ! bootstrap.js
-< ../node_modules/jquery/dist/jquery.min.js
+< ../node_modules/_u_s_javascript/jquery/jquery.min.js
 < javascripts/openqa.js
-< ../node_modules/datatables.net/js/dataTables.min.js
-< ../node_modules/popperjs2/popper.min.js
-< ../node_modules/datatables.net-bs5/js/dataTables.bootstrap5.min.js
-< ../node_modules/timeago/jquery.timeago.js
+< ../node_modules/_u_s_javascript/jquery-datatables/jquery.dataTables.min.js
+< ../node_modules/_u_s_javascript/popperjs2/popper.min.js
+< ../node_modules/_u_s_javascript/jquery-datatables/dataTables.bootstrap5.min.js
+< ../node_modules/_u_s_javascript/jquery-timeago/jquery.timeago.js
 < javascripts/index.js
 < javascripts/admintable.js
 < javascripts/admin_user.js
@@ -147,15 +147,15 @@
 < javascripts/obs_rsync.js
 < javascripts/parent_group_overview.js
 < 3rdparty/bootstrap-4-multi-dropdown-navbar/beta2.0/js/bootstrap-4-navbar.js
-< ../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js
-< ../node_modules/chosen-js/chosen.jquery.js
-< ../node_modules/jquery-ujs/src/rails.js
+< ../node_modules/_u_s_javascript/bootstrap5/js/bootstrap.bundle.min.js
+< ../node_modules/_u_s_javascript/chosen/chosen.jquery.js
+< ../node_modules/_u_s_nodejs/jquery-ujs/src/rails.js
 < javascripts/disable_animations.js [mode==test]
 < javascripts/fetch_status.js [mode==test]
 
 ! anser.js
 < javascripts/anser-import.js
-< ../node_modules/anser/lib/index.js
+< ../node_modules/_u_s_nodejs/anser/lib/index.js
 
 ! test_result.js
 < javascripts/render.js
diff --git a/assets/stylesheets/openqa.scss b/assets/stylesheets/openqa.scss
index f9fb8e3..e7952a3 100644
--- a/assets/stylesheets/openqa.scss
+++ b/assets/stylesheets/openqa.scss
@@ -9,7 +9,7 @@
 dummy { font-size: 42px; }
 
 // include Bootstrap
-@import "../node_modules/bootstrap/scss/bootstrap.scss";
+@import "../node_modules/_u_s_sass/bootstrap/bootstrap.scss";
 
 // include custom css for various aspects of the pages
 @import "overall.scss";
